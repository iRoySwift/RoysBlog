"use strict";(self.webpackChunkroys_blog=self.webpackChunkroys_blog||[]).push([[1487],{7994:(r,n,e)=>{e.r(n),e.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>t});var s=e(1527),a=e(7279);e(2379);const o={id:"solana-program",title:"Solana Program",description:"\u53c2\u8003\u6307\u5357"},l=void 0,i={id:"solana/solana-program",title:"Solana Program",description:"\u53c2\u8003\u6307\u5357",source:"@site/docs/solana/solana-program.md",sourceDirName:"solana",slug:"/solana/solana-program",permalink:"/docs/solana/solana-program",draft:!1,unlisted:!1,editUrl:"https://github.com/iRoySwift/RoysBlog/tree/master/docs/solana/solana-program.md",tags:[],version:"current",frontMatter:{id:"solana-program",title:"Solana Program",description:"\u53c2\u8003\u6307\u5357"},sidebar:"docs",previous:{title:"Api",permalink:"/docs/category/api"},next:{title:"SPL Token \u7a0b\u5e8f",permalink:"/docs/solana/token-program"}},c={},t=[{value:"\u80cc\u666f",id:"\u80cc\u666f",level:2},{value:"solana-program \u547d\u4ee4",id:"solana-program-\u547d\u4ee4",level:2},{value:"solana program \u90e8\u7f72\u5931\u8d25",id:"solana-program-\u90e8\u7f72\u5931\u8d25",level:2},{value:"Error: Deploying program failed: Error processing Instruction 0: account data too small for instruction",id:"error-deploying-program-failed-error-processing-instruction-0-account-data-too-small-for-instruction",level:3},{value:"\u67e5\u8be2\u8d26\u6237\u4e0b\u90e8\u7f72\u7684\u7a0b\u5e8f\u4e0e\u7f13\u51b2\u533a\u8fd0\u884c\u7684\u7a0b\u5e8f",id:"\u67e5\u8be2\u8d26\u6237\u4e0b\u90e8\u7f72\u7684\u7a0b\u5e8f\u4e0e\u7f13\u51b2\u533a\u8fd0\u884c\u7684\u7a0b\u5e8f",level:2},{value:"\u5173\u95ed\u8d26\u6237\u4e0b\u90e8\u7f72\u7684\u7a0b\u5e8f\u4e0e\u7f13\u51b2\u533a\u8fd0\u884c\u7684\u7a0b\u5e8f",id:"\u5173\u95ed\u8d26\u6237\u4e0b\u90e8\u7f72\u7684\u7a0b\u5e8f\u4e0e\u7f13\u51b2\u533a\u8fd0\u884c\u7684\u7a0b\u5e8f",level:2}];function d(r){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...r.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"\u80cc\u666f",children:"\u80cc\u666f"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://spl.solana.com/token",children:"SPL-Token"}),": Solana \u533a\u5757\u94fe\u4e0a\u7684\u4ee4\u724c\u7a0b\u5e8f\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u8be5\u7a0b\u5e8f\u5b9a\u4e49\u4e86\u53ef\u66ff\u4ee3\u548c\u4e0d\u53ef\u66ff\u4ee3\u4ee4\u724c\u7684\u901a\u7528\u5b9e\u73b0\u3002"}),"\n",(0,s.jsx)(n.p,{children:"Solana \u7684\u7f16\u7a0b\u6a21\u578b\u548c\u672c\u6587\u6863\u4e2d\u4f7f\u7528\u7684 Solana \u672f\u8bed\u7684\u5b9a\u4e49\u53ef\u5728\u4ee5\u4e0b\u7f51\u5740\u83b7\u5f97\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.solana.com/apps",children:"https://docs.solana.com/apps"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.solana.com/terminology",children:"https://docs.solana.com/terminology"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"solana-program-\u547d\u4ee4",children:"solana-program \u547d\u4ee4"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://docs.solana.com/cli/deploy-a-program#closing-program-and-buffer-accounts-and-reclaiming-their-lamports",children:"solana-program"})}),"\n",(0,s.jsx)(n.h2,{id:"solana-program-\u90e8\u7f72\u5931\u8d25",children:"solana program \u90e8\u7f72\u5931\u8d25"}),"\n",(0,s.jsx)(n.h3,{id:"error-deploying-program-failed-error-processing-instruction-0-account-data-too-small-for-instruction",children:"Error: Deploying program failed: Error processing Instruction 0: account data too small for instruction"}),"\n",(0,s.jsx)(n.p,{children:"\u662f!\u5373\u4f7f\u90e8\u7f72\u5931\u8d25\uff0c\u7528\u4e8e\u51fa\u79df\u7684 SOL \u4ecd\u7136\u5b58\u50a8\u5728\u5e10\u6237\u4e2d\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u4ece\u4e00\u4e2a\u90e8\u7f72\u4e2d\u6062\u590d SOL"}),"\n",(0,s.jsx)(n.p,{children:"\u90e8\u7f72\u5931\u8d25\u540e\uff0c\u60a8\u5c06\u5f97\u5230\u5982\u4e0b\u9519\u8bef\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-zsh",children:"solana program deploy target/deploy/native_dapp_todo.so\n==============================================================================\nRecover the intermediate account's ephemeral keypair file with\n`solana-keygen recover` and the following 12-word seed phrase:\n==============================================================================\ndynamic purse ritual young clarify walk mutual grocery speak cousin flash hole\n==============================================================================\nTo resume a deploy, pass the recovered keypair as the\n[BUFFER_SIGNER] to `solana program deploy` or `solana program write-buffer'.\nOr to recover the account's lamports, pass it as the\n[BUFFER_ACCOUNT_ADDRESS] argument to `solana program close`.\n==============================================================================\nError: Deploying program failed: Error processing Instruction 0: account data too small for instruction\n\n-   \u9996\u5148\uff0c\u4ece\u5b83\u7ed9\u4f60\u7684\u79cd\u5b50\u8bcd\u7ec4\u4e2d\u6062\u590d\u952e\u76d8\uff1a\n\n```zsh\n# After running this, paste in the seed phrase above\nsolana-keygen recover -o recover.json\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u7136\u540e\u4f60\u53ef\u4ee5\u5173\u95ed\u5e10\u6237\u4ee5\u6062\u590d\u4f60\u7684\u7d22\u5c14\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-zsh",children:"solana program close recover.json\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u4ece\u6240\u6709\u6b63\u5728\u8fdb\u884c\u6216\u5931\u8d25\u7684\u90e8\u7f72\u4e2d\u6062\u590d SOL"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u6216\u8005\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u4ece\u6240\u6709\u6b63\u5728\u8fdb\u884c\u7684\u90e8\u7f72\u4e2d\u6062\u590d SOL\uff1a"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u8981\u5173\u95ed\u4e0e\u5f53\u524d\u6743\u9650\u76f8\u5173\u7684\u6240\u6709\u7f13\u51b2\u5e10\u6237\uff1a"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-zsh",children:"solana program close --buffers\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u67e5\u8be2\u8d26\u6237\u4e0b\u90e8\u7f72\u7684\u7a0b\u5e8f\u4e0e\u7f13\u51b2\u533a\u8fd0\u884c\u7684\u7a0b\u5e8f",children:"\u67e5\u8be2\u8d26\u6237\u4e0b\u90e8\u7f72\u7684\u7a0b\u5e8f\u4e0e\u7f13\u51b2\u533a\u8fd0\u884c\u7684\u7a0b\u5e8f"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u67e5\u8be2\u9ed8\u8ba4\u8d26\u6237\u4e0b\u6240\u6709\u7a0b\u5e8f"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"solana program show --programs\nsolana program show --buffers\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u663e\u793a\u6240\u6709\u7f13\u51b2\u5e10\u6237\uff0c\u65e0\u8bba\u6743\u9650\u5982\u4f55"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"solana program show --buffers --all\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u67e5\u8be2\u6307\u5b9a\u8d26\u6237\u4e0b\u6240\u6709\u7a0b\u5e8f"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"solana program show --programs --buffer-authority <AUTHORITY_ADDRESS>\nsolana program show --buffers --buffer-authority <AUTHORITY_ADDRESS>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5173\u95ed\u8d26\u6237\u4e0b\u90e8\u7f72\u7684\u7a0b\u5e8f\u4e0e\u7f13\u51b2\u533a\u8fd0\u884c\u7684\u7a0b\u5e8f",children:"\u5173\u95ed\u8d26\u6237\u4e0b\u90e8\u7f72\u7684\u7a0b\u5e8f\u4e0e\u7f13\u51b2\u533a\u8fd0\u884c\u7684\u7a0b\u5e8f"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"solana program close <BADDRESS>\nsolana program close <ADDRESS> --buffer-authority <KEYPAIR_FILEPATH>\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u8981\u5173\u95ed\u5355\u4e2a\u5e10\u6237\u5e76\u6307\u5b9a\u4e0e\u9ed8\u8ba4\u4e0d\u540c\u7684\u6536\u4ef6\u4eba\uff1a"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"solana program close <ADDRESS> --recipient <RECIPIENT_ADDRESS>\n\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u8981\u5173\u95ed\u4e0e\u5f53\u524d\u6743\u9650\u76f8\u5173\u7684\u6240\u6709\u7f13\u51b2\u5e10\u6237\uff1a"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-zsh",children:"solana program close --buffers\n"})})]})}function p(r={}){const{wrapper:n}={...(0,a.a)(),...r.components};return n?(0,s.jsx)(n,{...r,children:(0,s.jsx)(d,{...r})}):d(r)}},2379:(r,n,e)=>{e.d(n,{Z:()=>o});e(959);const s={browserWindow:"browserWindow_my1Q",browserWindowHeader:"browserWindowHeader_jXSR",row:"row_KZDM",buttons:"buttons_uHc7",right:"right_oyze",browserWindowAddressBar:"browserWindowAddressBar_Pd8y",dot:"dot_giz1",browserWindowMenuIcon:"browserWindowMenuIcon_Vhuh",bar:"bar_rrRL",browserWindowBody:"browserWindowBody_Idgs"};var a=e(1527);function o(r){let{children:n,minHeight:e,url:o="http://localhost:3000"}=r;return(0,a.jsxs)("div",{className:s.browserWindow,style:{minHeight:e},children:[(0,a.jsxs)("div",{className:s.browserWindowHeader,children:[(0,a.jsxs)("div",{className:s.buttons,children:[(0,a.jsx)("span",{className:s.dot,style:{background:"#f25f58"}}),(0,a.jsx)("span",{className:s.dot,style:{background:"#fbbe3c"}}),(0,a.jsx)("span",{className:s.dot,style:{background:"#58cb42"}})]}),(0,a.jsx)("div",{className:s.browserWindowAddressBar,children:o}),(0,a.jsx)("div",{className:s.browserWindowMenuIcon,children:(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:s.bar}),(0,a.jsx)("span",{className:s.bar}),(0,a.jsx)("span",{className:s.bar})]})})]}),(0,a.jsx)("div",{className:s.browserWindowBody,children:n})]})}},7279:(r,n,e)=>{e.d(n,{Z:()=>i,a:()=>l});var s=e(959);const a={},o=s.createContext(a);function l(r){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof r?r(n):{...n,...r}}),[n,r])}function i(r){let n;return n=r.disableParentContext?"function"==typeof r.components?r.components(a):r.components||a:l(r.components),s.createElement(o.Provider,{value:n},r.children)}}}]);